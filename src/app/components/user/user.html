<div class="user-tabs-container">
  <!-- Tabs -->
  <div class="tabs mb-3">
    <button [class.active]="activeTab === 'create'" (click)="switchTab('create')">Create User</button>
    <button [class.active]="activeTab === 'view'" (click)="switchTab('view')">View Users</button>
  </div>

  <!-- CREATE TAB -->
  <div *ngIf="activeTab === 'create'" class="card p-4 shadow-sm">
    <h4 class="mb-3">{{ selectedUser ? 'Edit User' : 'Add New User' }}</h4>
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <div class="form-group mb-3">
        <label>User Name</label>
        <input type="text" class="form-control" formControlName="userName" />
        <small *ngIf="userForm.get('userName')?.touched && userForm.get('userName')?.invalid" class="text-danger">Username is required</small>
      </div>

      <div class="form-group mb-3">
        <label>Email</label>
        <input type="email" class="form-control" formControlName="email" />
        <small *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid" class="text-danger">Valid email is required</small>
      </div>

      <div class="form-group mb-3">
        <label>Password</label>
        <input type="password" class="form-control" formControlName="password" />
        <small *ngIf="userForm.get('password')?.touched && userForm.get('password')?.invalid" class="text-danger">Password must be at least 6 characters</small>
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="isLoading">
        {{ selectedUser ? (isLoading ? 'Updating...' : 'Update User') : (isLoading ? 'Saving...' : 'Save User') }}
      </button>
    </form>
  </div>

  <!-- VIEW TAB -->
  <div *ngIf="activeTab === 'view'" class="card p-4 shadow-sm">
    <h4 class="mb-3">All Users</h4>
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Sr.No</th>
          <th>Username</th>
          <th>Email</th>
          <th>Password</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ user.userName }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.password }}</td>
          <td>
            <button class="btn btn-warning btn-sm me-2" (click)="editUser(user)">Edit</button>
            <button class="btn btn-danger btn-sm" (click)="deleteUser(user.id)" [disabled]="!user.id">Delete</button>
          </td>
        </tr>
        <tr *ngIf="!users || users.length === 0">
          <td colspan="5" class="text-center text-muted">No users found</td>
        </tr>
      </tbody>
    </table>
  </div>
 
